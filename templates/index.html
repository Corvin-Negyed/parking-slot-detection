<!DOCTYPE html>
<!--
    SoloVision - Smart Parking Management System
    Main web interface for video upload and real-time detection
    Developers: Umran Er, Cem Akan
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SoloVision - Parking Detection System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <div class="header-content">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="SoloVision" class="header-logo">
            <p class="subtitle">Smart Parking Management System</p>
        </div>
    </header>
    
    <main>
        <div class="container">
            <!-- Upload Section -->
            <section class="upload-section" id="uploadSection">
                <div class="section-header">
                    <h2>Video Source</h2>
                    <p>Upload a video file or connect to a live camera stream</p>
                </div>
                
                <div class="upload-options">
                    <!-- File Upload -->
                    <div class="upload-box">
                        <h3>Upload Video File</h3>
                <div id="dropZone" class="drop-zone">
                            <div class="drop-icon">ðŸ“¹</div>
                            <p class="drop-text">Drag and drop your video here</p>
                            <p class="drop-text-or">or</p>
                    <input type="file" id="fileInput" accept="video/*" style="display: none;">
                            <button class="btn btn-primary" id="browseBtn">Browse Files</button>
                            <p class="file-info">Supported formats: MP4, AVI, MOV, MKV</p>
                        </div>
                        <div id="uploadProgress" class="upload-progress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <p id="progressText">Uploading...</p>
                        </div>
                    </div>
                    
                    <!-- Camera Stream -->
                    <div class="upload-box">
                        <h3>Live Camera Stream</h3>
                        <div class="camera-input">
                            <input type="text" id="cameraUrl" placeholder="Enter camera stream URL (e.g., rtsp://...)" class="input-field">
                            <button class="btn btn-secondary" id="connectBtn">Connect to Stream</button>
                            <p class="file-info">Connect to public IP cameras or RTSP streams</p>
                            <div id="streamStatus" class="status-message"></div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Video Display Section -->
            <section class="video-section" id="videoSection" style="display: none;">
                <div class="section-header">
                    <h2>Live Detection</h2>
                    <div class="controls">
                        <button class="btn btn-danger" id="stopBtn">Stop Processing</button>
                    </div>
                </div>
                
                <div class="video-container">
                    <img id="videoFeed" class="video-feed" src="" alt="Video feed will appear here">
                </div>
                
                <!-- Statistics Panel -->
                <div class="stats-panel">
                    <div class="stat-card">
                        <div class="stat-label">Total Spots</div>
                        <div class="stat-value" id="totalSpots">0</div>
                    </div>
                    <div class="stat-card occupied">
                        <div class="stat-label">Occupied</div>
                        <div class="stat-value" id="occupiedSpots">0</div>
                    </div>
                    <div class="stat-card available">
                        <div class="stat-label">Available</div>
                        <div class="stat-value" id="availableSpots">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Occupancy Rate</div>
                        <div class="stat-value" id="occupancyRate">0%</div>
                    </div>
                </div>
                
                <!-- Legend -->
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color occupied-color"></div>
                        <span>Occupied (Red)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color available-color"></div>
                        <span>Available (Green)</span>
                    </div>
                </div>
            </section>
            
            <!-- History Section -->
            <section class="history-section" id="historySection" style="display: none;">
                <div class="section-header">
                    <h2>Detection History</h2>
                    <div class="history-controls">
                        <button class="btn btn-secondary btn-small" id="refreshHistoryBtn">Refresh</button>
                        <button class="btn btn-danger btn-small" id="clearHistoryBtn">Clear History</button>
                    </div>
                </div>
                
                <div class="history-container">
                    <div id="storageInfo" class="storage-info"></div>
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Total</th>
                                <th>Occupied</th>
                                <th>Available</th>
                                <th>Rate</th>
                                <th>Timestamp</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                            <tr>
                                <td colspan="6" class="no-data">No data available</td>
                            </tr>
                        </tbody>
                    </table>
            </div>
            </section>
            
            <!-- Analytics Section -->
            <section class="analytics-section" id="analyticsSection" style="display: none;">
                <div class="section-header">
                    <h2>Analytics & Insights</h2>
                    <button class="btn btn-secondary btn-small" id="refreshAnalyticsBtn">Refresh</button>
                </div>
                
                <div class="analytics-container">
                    <!-- Overview Cards -->
                    <div class="analytics-overview" id="analyticsOverview">
                        <div class="analytics-card">
                            <h3>Overall Statistics</h3>
                            <div id="overallStats">Loading...</div>
                        </div>
                        <div class="analytics-card">
                            <h3>Trend Analysis</h3>
                            <div id="trendAnalysis">Loading...</div>
                        </div>
                    </div>
                    
                    <!-- Peak Hours -->
                    <div class="analytics-card full-width">
                        <h3>Peak Traffic Hours</h3>
                        <div id="peakHours">Loading...</div>
                    </div>
                    
                    <!-- Hourly Distribution Chart -->
                    <div class="analytics-card full-width">
                        <h3>Hourly Distribution</h3>
                        <canvas id="hourlyChart"></canvas>
                    </div>
                    
                    <!-- Daily Summary -->
                    <div class="analytics-card full-width">
                        <h3>Daily Summary</h3>
                        <div id="dailySummary">Loading...</div>
                    </div>
                </div>
            </section>
        </div>
    </main>
    
    <footer>
        <div class="footer-content">
            <p>&copy; 2025 SoloVision - Smart Parking Management System</p>
            <div class="developers-section">
                <p class="developers-title">Developed by</p>
                <div class="developers-grid">
                    <div class="developer">
                        <img src="{{ url_for('static', filename='developers/umran_thumb.png') }}" alt="Umran Er" class="developer-photo">
                        <span class="developer-name">Umran Er</span>
                    </div>
                    <div class="developer">
                        <img src="{{ url_for('static', filename='developers/cem_thumb.png') }}" alt="Cem Akan" class="developer-photo">
                        <span class="developer-name">Cem Akan</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
